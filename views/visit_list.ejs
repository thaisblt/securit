<!DOCTYPE html>
<html lang="fr">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Dashboard</title>
   <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <div class="avatar">
            <a href="/visit_list">
                <img class="img_header" src="/images/avatar.jpg" alt="Avatar Lambda">
            </a>
            <p class="info_affichee" ><%= name %></p>
        </div>
        <a href="/visit_list">
            <img class="img_logo" src="/images/securit_logo.png" alt="Logo Securit">
        </a>
        <form action="/logout" method="POST" class="logout-form">
            <button type="submit" class="button logout-button">
                Déconnexion
            </button>
        </form>

    </header><br>

    <div class="search">
        <input
            type="search"
            id="search"
            name="search"
            placeholder="Rechercher une visite..."
        />
    </div>


    <main class="page-content">
        <div class="page-header">
            <h2>Visites</h2>
            <a href="/new_visit" class="btn-add">＋ Nouvelle visite</a>
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Entreprise</th>
                    <th>Inspecteur</th>
                </tr>
            </thead>
            <tbody>
                <% if (visites.length === 0) { %>
                    <tr>
                        <td colspan="3" class="empty">Aucune visite enregistrée</td>
                    </tr>
                <% } else { %>
                    <% visites.forEach(visit => { %>
                        <tr>
                            <td><%= new Date(visit.date).toLocaleDateString() %></td>
                            <td><%= visit.company.name %></td>
                            <td><%= visit.inspector.name %></td>
                        </tr>
                    <% }) %>
                <% } %>
            </tbody>
        </table>
    </main>

    
</body>
</html>
